# 03. API Documentation

API의 중요한 역할 중 하나는 잠재적 사용자에게 신뢰를 주는 것이다. 
사용자들이 API를 반복적으로 호출하려면 이를 코드로 통합해야 하며, 이는 곧 사용자의 시스템이 API를
주기적으로 호출하도록 구현하는 것을 의미한다.

API는 결국 반복적으로, 자동으로 호출되기에 문서를 통해 신뢰할 수 있는 계약(constract)임을 명확히 보여주어야 한다.
사용자들은 반복적인 API 사용을 고려할 떄 **이 API를 신뢰할 수 있을지**에 대해 고민한다. 만약 이러한 신뢰를 주지 못한다면,
잠재적 사용자들은 API 사용을 포기하고 다른 대안을 찾을 것이다.

---

## 좋은 API 문서 만들기

API를 처음 접한 사람에게 필요한 것은 복잡한 기술 설명이 아니다. 
이 도구가 무엇을 위해 만들어졌고, 어떻게 사용할 수 있는지를 알려 주는 친절한 안내가 먼져다.

따라서 새로운 API 문서를 작성할 때는 **핵심 기능**부터 시작하는 것이 좋다. 
이러한 정보는 API 사용에 꼭 필요한 기반을 형성하며, 시간이 지나 API가 안정화됨에 따라 문서 또한 점진적으로 확장될 수 있다. 
이후에는 개발 경험과 생산성을 높이기 위한 **추가 기능**을 보완함으로써, 경쟁 API와 차별화된 강점을 만들어 갈 수 있다.


## 핵심 기능

사용자가 API를 처음 마주할 때 가장 먼저 찾는 것은 복잡한 코드보다는 API 주소, 인증 방식, 테스트 방법 등 사용자가 API를 이해하고 제대로 활용하기 위해 반드시 필요한 기본적인 정보들이다. 
이러한 요소가 빠지면 많은 사용자가 API의 신뢰성과 실용성에 의문을 품고 다른 대안을 찾게 된다.

API 문서에서 말하는 핵심 기능이란, 외부 개발자가 다음을 할 수 있게 만드는 정보이다.

- API를 이해한다. (무엇을 해결하는지)
- API를 성공적으로 호출한다. (인증·요청 형식)
- 응답을 코드로 처리한다. (스키마·에러 규약)
- 프로덕션에서 안전하게 운영한다. (제한·버전·변경 정책)

핵심 기능이 먼져 필요한 이유는 간단하다.
추가 기능은 핵심 계약이 명확해야만 의미가 있기 때문이다.
계약이 불명확하면, 추가 기능은 오히려 혼란을 키운다.

### API 문서의 핵심 기능 구성

1. 시작하기 (getting started, 온보딩의 최소 단위)
API의 목적과 사용 방법을 소개하는 개요 역할을 한다. API의 주소, 보안 요구 사항, 사용자 ID, 인증키 발급 절차 등을 안내해, 사용자가 API를 원활하게 시작하는 데 필요한 정보를 명확히 제공한다.

2. 엔드포인트 정의/명세 (Endpoint definitions)
각 엔드포인트는 API 사용자에게 제공되는 리소스를 설명하며, 요청 방식, 응답 형식, 발생 가능한 오류 정보를 포함한다. 엔드포인트는 API 호출 시 사용되는 전체 주소와 리소스 이름을 의미한다.

3. 오류 규약 및 운영 동작 (예측 가능한 실패 처리)
오류 응답 포맷과 에러 코드 체계를 정의하고, 재시도 가능 조건, 타임아웃 권장, rate limit(쿼터/제한) 및 제한 초과 시 대응 방식 등을 명시한다.
이를 통해 자동화된 시스템에서도 안정적으로 예외 처리가 가능해진다.

4. 버전·호환성·변경(폐기) 정책 (장기 통합 보장)
버전 표기 방식, 하위 호환성 원칙, breaking change 기준, deprecation 절차를 제공하여 시간이 지나도 통합 코드가 예측 가능하게 유지되도록 한다.

5. OAS/OpenAPI (기계 판독 가능한 계약)
사람이 읽는 문서와 별개로, 도구가 API 계약을 정확히 해석하도록 한다.
위 계약을 JSON/YAML 기반의 OpenAPI 명세로 제공하여 문서 자동 생성, 검증, Mock, SDK 등 도구 기반 통합을 가능하게 하고 문서-구현 간 불일치를 줄인다.


### API 문서의 추가 기능 구성

API 문서에서 **추가 기능**이란 핵심 기능(엔드포인트 명세, 오류 규약, 버전 정책 등)이 이미 갖춰졌다는 전제 하에, 외부 개발자가 API를 더 빠르고 쉽게 학습·통합·운영할 수 있도록 지원하는 요소를 말한다. 
추가 기능은 없으면 못 쓰는 정보가 아닌 개발 경험과 채택률을 높이는 장치에 가깝다.

1. 샘플 코드 및 예제 프로젝트
대표 사용 시나리오를 제공하여 구현 방향을 빠르게 잡게 하고, 올바른 요청/응답 처리, 에러 처리 패턴을 참고할 수 있게 한다.

2. 대화형 문서 (API Explorer/Try-it-out)
대화형 문서를 통해 사용자는 개발 환경에서 직접 샘플 API 호출을 실행해 보며, API의 동작을 확인할 수 있다.
FastAPI 프로젝트에서는 Swagger UI를 활용해 이러한 대화형 문서를 자동으로 생성할 수 있으며, 이를 통해 사용자가 실시간으로 API를 시험해 볼 수 있는 직관적인 인터페이스를 제공한다.

3. SKD 및 클라이언트 라이브러리
API 제공자가 주요 프로그래밍 언어로 된 SDK를 제공하면, 사용자들은 API를 더 쉽게 활용할 수 있다.
SDK는 과도한 요청이나 오용을 방지하는 데에도 도움이 되며, 특히 데이터 사이언티스트와 같은 기술 중심 사용자들에게는 진입 장벽을 낮추고 사용성을 개선하는 효과가 크다.

4. 샌드박스/테스트 환경
대화형 문서보다 한 단계 진화한 샌드박스 환경에서는 개발자가 여러 개의 API 호출을 순차적으로 수행하고, 상태를 유지한 채 그 결과를 확인할 수 있다.
예를 들어, 첫번째 호출로 주문을 하고, 이어서 두 번째 호출로 해당 주문 결과를 조회하는 방식이다. 이 환경은 실제 서비스와 유사한 조건에서 테스트해볼 수 있어, 복잡한 API 흐름을 검증하는 데 유리한다.

5. 기타 기능
API 제공자는 개발자의 편의를 높이기 위해 다양한 부가 기능을 함께 제공할 수 있다.
최근에는 Postman API 테스트 도구에서 실행할 수 있는 Postman 컬렉션이 인기를 끌고 있다. 
이 컬렉션은 샘플 요청과 테스트 사례를 포함하고 있어, 사용자는 API를 보다 쉽게 시도하고 이해할 수 있다.

6. 피드백 채널 
사용자가 API를 활용하는 과정에서 질문이나 문제를 전달할 수 있는 소통 창구는 매우 중요하다. 일반적으로 지원용 이메일 주소, 웹사이트 문의 양식, GitHub 이슈 트래커 같은 방식이 널리 사용된다. 
이러한 피드백 채널은 단순한 소통 수단을 넘어 사용자에게 신뢰를 주고, API 운영이 실제로 잘 유지되고 있다는 인상을 심어주는 중요한 역할을 한다.
